<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>postMessage()</title>
<link rel="stylesheet" href="../css/main.css">
</head>
<body>
<div id="container">

<h1>postMessage()</h1>

<iframe src="child.html" seamless></iframe>

<p id="messages"></p>

<script>
window.addEventListener("message", function(event) {    
  document.querySelector("#messages").innerHTML = "<p>Sent a message to child.html in the iframe above and got the following in response:</p><p>" + event.data + "</p>";
}); 

var childWindow = document.querySelector("iframe").contentWindow;
setTimeout(function(){ // allow construction of iframe
  childWindow.postMessage("Hi from index.html!", "*"); 
}, 1);
</script>

<a href="view-source:http://simpl.info/postmessage" title="View source for this page" id="viewSource">View source</a>
</div> 
<script src="../js/lib/ga.js"></script>
</body>
</html>